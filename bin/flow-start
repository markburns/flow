#!/usr/bin/env zsh

TICKET=$1
TITLE=$(slugify $(flow-jira-title $TICKET))
BRANCH="$TICKET-$TITLE"

echo "create new branch $BRANCH"
git fetch && git checkout develop && git pull --rebase && git reset --hard origin/develop > /dev/null
git checkout -b $BRANCH 2> /dev/null || git checkout $BRANCH

echo '-----------------'
echo https://$JIRA_SUBDOMAIN.atlassian.net/browse/$TICKET
echo $response  | jq '.fields | .description'


flow-jira-assign $TICKET
flow-jira-transition 'IN_PROGRESS' $TICKET
